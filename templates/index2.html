<!DOCTYPE html>
<head>
  <title>OCR viz</title>
  <meta name='author' content='Adam Bradley'x>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="./static/lib/dropzone/dropzone.css">
  <link rel="stylesheet" href="./static/lib/dropzone/style.css">
  <link rel="stylesheet" type="text/css" href="./static/lib/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="./static/css/style.css">



  <style>
    #dropzone {
      padding: 15px 50px;
      margin: auto;
      width: 80%;
    }

    #video{
      margin: 0;
    }

    #photo {
      margin: 0;
    }

    #startbutton {
       margin: 10px 0;
       box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);
  	   background-color: #008CBA; /* Blue */
       border: none;
       color: white;
       padding: 15px 32px;
       text-align: center;
       text-decoration: none;
       display: inline-block;
       font-size: 16px;
       border-radius: 8px;
       transition-duration: 0.4s;
       cursor: pointer;
       clear: right;
    }

    #startbutton:active {
       margin: 10px 0;
       box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);
       background-color: #00FFFF; /* Cyan */
       border: none;
       color: white;
       padding: 15px 32px;
       text-align: center;
       text-decoration: none;
       display: inline-block;
       font-size: 16px;
       border-radius: 8px;
       transition-duration: 0.4s;
       cursor: pointer;
       clear: right;
    }

    #dlbutton {
       margin: 10px 0;
       box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);
  	   background-color: #008CBA; /* Blue */
       border: none;
       color: white;
       padding: 15px 32px;
       text-align: center;
       text-decoration: none;
       display: inline-block;
       font-size: 16px;
       border-radius: 8px;
       transition-duration: 0.4s;
       cursor: pointer;
       clear: right;
    }

    #dlbutton:active {
       margin: 10px 0;
       box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);
       background-color: #00FFFF; /* Cyan */
       border: none;
       color: white;
       padding: 15px 32px;
       text-align: center;
       text-decoration: none;
       display: inline-block;
       font-size: 16px;
       border-radius: 8px;
       transition-duration: 0.4s;
       cursor: pointer;
       clear: right;
    }

    #canvas{
      display: none;
    }

    .camera{

    }

    .output{
      position: relative
  	  top: 10px;


    }

    .col-md-6 {
      /*border:2px solid blue;*/
    }

    .col-md-4{
      border:2px solid white;
    }

    .row{
      overflow: hidden;
    }

    [class*="col-"]{
      margin-bottom: -99999px;
      padding-bottom: 99999px;
    }

    #camera-overlay {
      position: absolute;
      left: 50%;
    }

    #camera-frame {
      position: relative;
      top: 5px;
      left: -50%;
      right: 133px;
      width: 363px;
      height: 470px;
      border: 2px dashed red;
    }

    #app-content {
      width: 100%;
      margin: 100px 0 0 0;
    }

    .logo {
      position: absolute;
      bottom: 5%;
      right: 5%;
      font-size: 5vw;
      font-weight: 900;
    }
    .logo .first {
      color: #163e6f;
    }
    .logo .last {
      color : white;
    }
    .tool-box-logo {
      margin: 0 0 5% 0;
      padding: 5% 0 10% 0;
      background-color: rgba(255,255,255,0.5);
    }
    .tool-box-logo img {
      width: 100%;
      padding: 5%;
    }
  </style>
</head>

<body>
  <div class="logo">
    <span class="first">TEXT</span><span class="last">ENSION</span>
  </div>
  <div class="container-fluid">
    <span id="tool-box-toggle" onclick="openNav()">â˜°</span>      
    <div class="tool-box">
      <div class="tool-box-close" style="background-color:rgba(255,255,255,0.5);">
        <a href="javascript:void(0)" class="close-btn" onclick="closeNav()">&times;</a>
      </div>
      <div class="tool-box-logo">
        <img src="./static/css/uoit_logo.png"/>
      </div>
      <div class="tool-box-link">
        <a data-toggle="tab" href="#menu-file">File</a>
        <a data-toggle="tab" href="#menu-camera">Camera</a>
        <a data-toggle="tab" href="#menu-settings">Settings</a>
      </div>
    </div>

    <div id="app-content">      
      <div class="tab-content">

        <div id="menu-file" class="tab-pane fade in active">
          <div class="row">
            <div class="col-md-12 text-center">
              <b>Use your own documents to process and analyze.</b><br/>You could also click to browse for a file on your computer.
              <div id="dropzone">
                <form action="/upload" class="dropzone needsclick dz-clickable" id="demo-upload">
                  <div class="dz-message needsclick">
                    <b>Drag &amp; drop a document or image here.</b>
                  </div>
                </form>
              </div>
            </div>
            <div class="col-md-12 text-center">
            </div>
          </div>
        </div>


        <div id="menu-camera" class="tab-pane fade">
          <div class="row">
            <div class="col-md-12 text-center vertical-center">
              <div class="camera">
                <div id="camera-overlay">
                  <div id="camera-frame">This is where you want the book to be.</div>
                </div>
                <video id="video">Video stream not available.</video>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12 text-center">
              <button id="startbutton"><span class="glyphicon glyphicon-picture"></span>Take a picture</button>
            </div>
          </div>
        
          <div class="row">
            <div class="col-md-12 text-center vertical-center">
              <div class="output">
                <img id="photo" alt="The screen capture will appear in this box.">
              </div>
            </div>
            <div class="col=md-12">
              <canvas id="canvas"></canvas>
            </div>
          </div>
        </div>


        <div id="menu-settings" class="tab-pane fade">          
          <div class="row">     
            <div class="text-center">
              <table style="margin: 0 auto;">
                <thead>
                  <tr>
                    <th>Settings</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Spread</td>
                    <td><input id="option-spread" type="number" class="form-control" form="demo-upload" value="{{ session['options']['spread'] }}"/></td>
                  </tr>
                  <tr>
                    <td>Hi-Res</td>
                    <td>
                      {% if session['options']['hires']==True %}
                        <input id="option-hires" type="checkbox" form="demo-upload" checked/>
                      {% else %}
                        <input id="option-hires" type="checkbox" form="demo-upload"/>                        
                      {% endif %}
                    </td>
                  </tr>
                  <tr>
                    <td>Anti-Aliasing</td>
                    <td>
                      {% if session['options']['antialias']==True %}
                        <input id="option-antialias" type="checkbox" form="demo-upload" checked/>
                      {% else %}
                        <input id="option-antialias" type="checkbox" form="demo-upload"/>                        
                      {% endif %}
                    </td>
                  </tr>
                  <tr>
                    <td>Translate</td>
                    <td>
                      {% if session['options']['translate']==True %}
                        <input id="option-translate" type="checkbox" form="demo-upload" checked/>
                      {% else %}
                        <input id="option-translate" type="checkbox" form="demo-upload"/>                        
                      {% endif %}
                    </td>
                  </tr>
                  <tr>
                    <td>Blur</td>
                    <td><input id="option-blur" type="number" class="form-control bfh-number" form="demo-upload" value="{{ session['options']['blur'] }}"/></td>
                  </tr>
                  <tr>
                    <td>Pixel Cut Width</td>
                    <td><input id="option-cut" type="number" class="form-control bfh-number" form="demo-upload" value="{{ session['options']['cut'] }}"/></td>
                  </tr>
                  <tr>
                    <td>Noise Threshold</td>
                    <td><input id="option-noise" type="number" class="form-control bfh-number" form="demo-upload" value="{{ session['options']['noise'] }}"/></td>
                  </tr>
                  <tr>
                    <td>Line Buffer</td>
                    <td><input id="option-buffer" type="number" class="form-control bfh-number" form="demo-upload" value="{{ session['options']['buffer'] }}"/></td>
                  </tr>
                  <tr>
                    <td>Max Width</td>
                    <td><input id="option-width" type="number" class="form-control bfh-number" form="demo-upload" value="{{ session['options']['width'] }}"/></td>
                  </tr>
                  <tr>
                    <td>Max Height</td>
                    <td><input id="option-height" type="number" class="form-control bfh-number" form="demo-upload" value="{{ session['options']['height'] }}"/></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <script src="./static/lib/dropzone/dropzone.js"></script>
  <script src="./static/lib/capture/capture.js"></script>
  <script src="./static/js/main.js"></script>
  <script src="./static/lib/jquery/jquery-3.2.0.min.js"></script>
  <script src="./static/lib/bootstrap/js/bootstrap.min.js"></script>
  <script>
    Dropzone.autoDiscover = false;
    $(function() {
      var myDropzone = new Dropzone("#demo-upload");
      myDropzone.on("queuecomplete", function(file) {
        window.location = "{{ url_for('interact') }}";
      });
      myDropzone.on("sending", function(file, xhr, formData) {
        formData.append("spread", $('#option-spread').val());
        formData.append("hires", $('#option-hires').is(":checked"));
        formData.append("antialias", $('#option-antialias').is(":checked"));
        formData.append("translate", $('#option-translate').is(":checked"));
        formData.append("cut", $('#option-cut').val());
        formData.append("blur", $('#option-blur').val());
        formData.append("noise", $('#option-noise').val());
        formData.append("buffer", $('#option-buffer').val()); 
        formData.append("width", $('#option-width').val()); 
        formData.append("height", $('#option-height').val());
      });
    });
  </script>
</body>

</html>
